{"compress":true,"commitItems":[["f958071a-84e6-4835-b15a-a6a99661d2ec",1520245527374,"",[[1520245486733,["gengmei_pxf@gengmei123.local",[[1,0,"Android减少重复代码\n===\n\n\n重复的代码一直都是可维护性的大敌，重构的重要任务之一也就是要去除掉重复的代码，有效的减少重复代码，可以大大提高软件的扩展性。\n\n       在Android开发中，很容易产生重复的代码。因为Android是组件，模板式开发，每个页面都是独立用Activity或Fragment实现，布局文件都是用XML方式去写，所以很容易造成代码的重复，虽然二个页长的差不多，但毕竟是二个Activity，于是就拷一份出来，改吧改吧就成了。\n\n       那么我们如何做才能去掉重复的代码呢？\n\n**一、使用include标签引用重复布局**\n\n**二、使用style定义样式**\n\n**三、使用ViewStub减少整体布局的重复**\n\n**四、多使用应用资源**\n\n**五、代码的抽象与继承**\n\n**六、总结**\n\n**一、使用include标签引用重复布局**\n\n       标签是减少布局重复的利器，它的作用是把另外一个布局文件全部无修改式的嵌入到标签所在的位置。这与C/C++语言的预处理指令#include是一样的。在WEB框架式开发中，也非常常用HTML模板，其中也有类似的include。目的也是减少代码的重复。\n\n       要想把include用的恰到好处，首先要做的就是把整体布局模块化，从整体的布局出发，找出可复用的局部布局或布局组合，把它们放入单独一个布局文件中，然后在其他的地方就可以include了。\n\n例如：\n\n**test.xml**\n\n**[html]** [view plain](http://csdnimg.cn/release/phoenix/# \"view plain\") [copy](http://csdnimg.cn/release/phoenix/# \"copy\")\n\n1.  <LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"    \n2.  xmlns:tools=\"http://schemas.android.com/tools\"    \n3.  android:layout_width=\"match_parent\"    \n4.  android:layout_height=\"match_parent\"     \n5.  android:orientation=\"vertical\">    \n\n8.  <Button     \n9.  android:layout_width=\"match_parent\"    \n10.  android:layout_height=\"wrap_content\"    \n11.  android:textSize=\"16dp\"    \n12.  android:gravity=\"center\"    \n13.  android:layout_marginTop=\"5dp\"    \n14.  android:layout_marginBottom=\"5dp\"    \n15.  android:text=\"1\"  />    \n\n17.  <View     \n18.  android:layout_width=\"match_parent\"    \n19.  android:layout_height=\"0.5dp\"    \n20.  android:background=\"#BFBFBF\"/>    \n\n23.  <Button     \n24.  android:layout_width=\"match_parent\"    \n25.  android:layout_height=\"wrap_content\"    \n26.  android:textSize=\"16dp\"    \n27.  android:gravity=\"center\"    \n28.  android:layout_marginTop=\"5dp\"    \n29.  android:layout_marginBottom=\"5dp\"    \n30.  android:text=\"2\"  />    \n\n32.  <View     \n33.  android:layout_width=\"match_parent\"    \n34.  android:layout_height=\"0.5dp\"    \n35.  android:background=\"#BFBFBF\"/>    \n\n37.  <Button     \n38.  android:layout_width=\"match_parent\"    \n39.  android:layout_height=\"wrap_content\"    \n40.  android:textSize=\"16dp\"    \n41.  android:gravity=\"center\"    \n42.  android:layout_marginTop=\"5dp\"    \n43.  android:layout_marginBottom=\"5dp\"    \n44.  android:text=\"3\"   />    \n\n46.  </LinearLayout>  \n\n       这段布局是我们正常情况下的写法，从布局中我们可以看出View标签代码是一样的，那么我们就可以把View单独写在一个xml文件里，然后用include标签引用它即可。\n\n简化后的布局代码如下：\n\n**test_1.xml**\n\n**[html]** [view plain](http://csdnimg.cn/release/phoenix/# \"view plain\") [copy](http://csdnimg.cn/release/phoenix/# \"copy\")\n\n1.  <LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"  \n2.  xmlns:tools=\"http://schemas.android.com/tools\"  \n3.  android:layout_width=\"match_parent\"  \n4.  android:layout_height=\"match_parent\"  \n5.  android:orientation=\"vertical\">  \n\n7.  <Button  \n8.  android:layout_width=\"match_parent\"  \n9.  android:layout_height=\"wrap_content\"  \n10.  android:textSize=\"16dp\"  \n11.  android:gravity=\"center\"  \n12.  android:layout_marginTop=\"5dp\"  \n13.  android:layout_marginBottom=\"5dp\"  \n14.  android:text=\"1\"  />  \n\n16.  <include layout=\"@layout/divider_view\"/>  \n\n18.  <Button  \n19.  android:layout_width=\"match_parent\"  \n20.  android:layout_height=\"wrap_content\"  \n21.  android:textSize=\"16dp\"  \n22.  android:gravity=\"center\"  \n23.  android:layout_marginTop=\"5dp\"  \n24.  android:layout_marginBottom=\"5dp\"  \n25.  android:text=\"2\"  />  \n\n27.  <include layout=\"@layout/divider_view\"/>  \n\n29.  <Button  \n30.  android:layout_width=\"match_parent\"  \n31.  android:layout_height=\"wrap_content\"  \n32.  android:textSize=\"16dp\"  \n33.  android:gravity=\"center\"  \n34.  android:layout_marginTop=\"5dp\"  \n35.  android:layout_marginBottom=\"5dp\"  \n36.  android:text=\"3\"  />  \n37.  </LinearLayout>  \n\n**divider_view.xml**\n\n**[html]** [view plain](http://csdnimg.cn/release/phoenix/# \"view plain\") [copy](http://csdnimg.cn/release/phoenix/# \"copy\")\n\n1.  <?xml version=\"1.0\" encoding=\"utf-8\"?>  \n2.  <View xmlns:android=\"http://schemas.android.com/apk/res/android\"  \n3.  android:layout_width=\"match_parent\"  \n4.  android:layout_height=\"0.5dp\"  \n5.  android:background=\"#BFBFBF\">  \n\n7.  </View>   \n\n       怎么样，是不是比原来的布局代码简洁直观多了，而且实现出来的效果也一样。当然这是单个View重复，那么多个View组重复也是一样的。\n\n       使用include标签还有一个好处，就比如你要修改View的样式，在未使用include之前，你需要把test.xml中的所有View都要修改一遍，但是使用include之后，你只需要修改divider_view.xml中的View即可。\n\n**二、使用style定义样式**\n\n       在我们开发应用的过程中，会有很多控件的样式是一样的，我们一般会用复制-粘贴来使用，这样就会有大量重复代码出现，而且如果我们某一天要修改该控件的样式了，那我们需要找到所有这些控件，一个一个的修改样式，但是我们如果使用style来定义样式的话，不仅会减少大量重复代码，而且修改样式也变的非常灵活。\n\n       就比如test_1.xml布局文件中有三个Button控件，只有text内容不同，那么我们如何把Button的共同点提取到style中呢？很简单，在styles.xml下 新增一对<style>标签，为该style命名，如命名为DemoBtn，然后在<style>标签内 使用<item>标签来存放控件的属性，例如 android:layout_width=\"match_parent\"     ，用<item>来表示就是 <item name=\"android:layout_width\">match_parent</item>，name是控件的属性名，标签之间则是属性值\n\n按照这样的方法，把所有共同属性都添加到DemoBtn这一style中即可。\n\n**[html]** [view plain](http://csdnimg.cn/release/phoenix/# \"view plain\") [copy](http://csdnimg.cn/release/phoenix/# \"copy\")\n\n1.  <style name=\"DemoBtn\">    \n\n3.  <item name=\"android:layout_width\">match_parent</item>    \n4.  <item name=\"android:layout_height\">wrap_content</item>    \n5.  <item name=\"android:textSize\">16dp</item>    \n6.  <item name=\"android:gravity\">center</item>    \n7.  <item name=\"android:layout_marginTop\">5dp</item>    \n8.  <item name=\"android:layout_marginBottom\">5dp</item>    \n9.  </style>  \n\n       最后回到布局中，把三个Button的共同属性全都删除掉，换为 style =\"@style/DemoBtn\"   ，就能达到原来的效果，1行代码代替6行代码，代码现在更加美观了。\n\n**test_2.xml**\n\n**[html]** [view plain](http://csdnimg.cn/release/phoenix/# \"view plain\") [copy](http://csdnimg.cn/release/phoenix/# \"copy\")\n\n1.  <LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"    \n2.  xmlns:tools=\"http://schemas.android.com/tools\"    \n3.  android:layout_width=\"match_parent\"    \n4.  android:layout_height=\"match_parent\"     \n5.  android:orientation=\"vertical\">    \n\n7.  <Button     \n8.  style=\"@style/DemoBtn\"    \n9.  android:text=\"1\"    />    \n\n11.  <include layout=\"@layout/divider_view\"/>    \n\n13.  <Button     \n14.  style=\"@style/DemoBtn\"    \n15.  android:text=\"2\"   />    \n\n17.  <include layout=\"@layout/divider_view\"/>    \n\n19.  <Button     \n20.  style=\"@style/DemoBtn\"    \n21.  android:text=\"3\"   />    \n\n23.  </LinearLayout>  \n\n       经过include标签引用和style样式提取，在看我们的布局文件，是不是感觉很清爽了。而且需要修改样式的话，只需要在style中修改就可以了。\n\n**三、使用ViewStub减少整体布局的重复**\n\n       前面是找出布局中的可复用布局组合，include以减少重复。但有些时候是反过来的，也就是说有几个页面，它们整体的一样的，但是某个局部是不同的，这个时候include就不行了。这个时候就可以使用一样的整体布局+ViewStub来做布局。\n\n       ViewStub是一个轻量级别的，不可见的View，当ViewStub被设为visible时，或者显示调用layout()时，才会去把它所指向的布局渲染出来，所以它非常适合处理整体相同，局部不同的情况。关于ViewStub的使用可以参考[Android实战技巧：ViewStub的应用](http://blog.csdn.net/hitlion2008/article/details/6737537)。 具体的策略是：\n\n*   规划整体布局，抽象出共同的布局，把可变的布局识别出来\n*   写整体布局，对于可变的局部布局用ViewStub替代\n*   用一个基Fragment来操作整体布局。\n*   创建基Fragment的子类，每个子类，用真正的布局来替换ViewStub。\n\n**四、多使用应用资源**\n\n       这点是非常重要的，Android的强大之处在于，所有的资源的指定都可以用引用，而非直接写死，直接写死就会出现重复代码，比如颜色，背影，字串，布局，ID，度量(dimen)，风格等等。那么，我们在使用的时候，也尽可能的使用引用，这样非常易于复用，修改和定制，从而也就更方便复用。\n\n**五、代码的抽象与继承**\n\n       从代码上去除重复的代码就是用通用的重构技巧，比如提炼方法，抽象基类，提炼常量等。\n\n**六、总结**\n\n       其实代码的去重复的关键都在于要分析出可变与不可变，共性和特性，这是抽象与封装的基础。这个没有直接可操作性的建议，只能靠自己平时多多积累，以及遇到问题时多多思考。\n\n       另外，就是对于重复的定义是达到三次及三次以上。如果仅出现二次，并且，无可能出现别一次，这个时候其时，要不要去重复有在商榷，写第二次时，花时间重构，与拷贝或重新实现，其实代码差不多。当发现第三次实现某个东西时，就要考虑好好的重构一下，减少重复。\n\n       还有，就是，在项目开始不要考虑的太多，不要过度设计。孤认为，不过度设计，更不要过早优化，就根据需求和进度和发展状况综合来看。当出现了重复，需要重构时就立马去做，这样就不会出问题。但如果没能及时去做重构，欠了债，那么由于涉及代码，功能和模块都比较多时，再去重构，难度大，风险也大。就好比房屋的维护保养，当出现灰尘时就去打扫，很容易，个把小时就搞定了，但如果一直拖着，一年才打扫一次，可能要十天半个月才能完事。"]],[0,0],[7409,7409]]],[1520245529991,["gengmei_pxf@gengmei123.local",[[1,20,"\n"],[-1,84,"       "],[1,91,"       "],[-1,235,"       "],[1,242,"       "],[-1,399,"       "],[1,406,"       "],[-1,531,"       "],[1,538,"       "],[-1,662," "],[1,663," "],[-1,725," "],[1,726," "],[-1,795," "],[1,796," "],[-1,854,"    "],[1,858,"    "],[-1,909,"    "],[1,913,"    "],[-1,953,"    "],[1,957,"    "],[-1,998,"     "],[1,1003,"     "],[-1,1039,"    "],[1,1043,"    "],[-1,1056,"     "],[1,1061,"     "],[-1,1101,"    "],[1,1105,"    "],[-1,1147,"    "],[1,1151,"    "],[-1,1180,"    "],[1,1184,"    "],[-1,1214,"    "],[1,1218,"    "],[-1,1254,"    "],[1,1258,"    "],[-1,1297,"    "],[1,1301,"    "],[-1,1323,"  />    "],[1,1331,"  />    "],[-1,1343,"     "],[1,1348,"     "],[-1,1389,"    "],[1,1393,"    "],[-1,1428,"    "],[1,1432,"    "],[-1,1468,"    "],[1,1472,"    "],[-1,1486,"     "],[1,1491,"     "],[-1,1532,"    "],[1,1536,"    "],[-1,1578,"    "],[1,1582,"    "],[-1,1611,"    "],[1,1615,"    "],[-1,1645,"    "],[1,1649,"    "],[-1,1685,"    "],[1,1689,"    "],[-1,1728,"    "],[1,1732,"    "],[-1,1754,"  />    "],[1,1762,"  />    "],[-1,1774,"     "],[1,1779,"     "],[-1,1820,"    "],[1,1824,"    "],[-1,1859,"    "],[1,1863,"    "],[-1,1899,"    "],[1,1903,"    "],[-1,1917,"     "],[1,1922,"     "],[-1,1963,"    "],[1,1967,"    "],[-1,2009,"    "],[1,2013,"    "],[-1,2042,"    "],[1,2046,"    "],[-1,2076,"    "],[1,2080,"    "],[-1,2116,"    "],[1,2120,"    "],[-1,2159,"    "],[1,2163,"    "],[-1,2185,"   />    "],[1,2194,"   />    "],[-1,2216,"  \n\n       "],[1,2227,"  \n\n       "],[-1,2350," "],[1,2351," "],[-1,2413," "],[1,2414," "],[-1,2483," "],[1,2484," "],[-1,2542,"  "],[1,2544,"  "],[-1,2595,"  "],[1,2597,"  "],[-1,2637,"  "],[1,2639,"  "],[-1,2680,"  "],[1,2682,"  "],[-1,2718,"  "],[1,2720,"  "],[-1,2733,"  "],[1,2735,"  "],[-1,2775,"  "],[1,2777,"  "],[-1,2818,"  "],[1,2820,"  "],[-1,2849,"  "],[1,2851,"  "],[-1,2881,"  "],[1,2883,"  "],[-1,2919,"  "],[1,2921,"  "],[-1,2960,"  "],[1,2962,"  "],[-1,2984,"  />  "],[1,2990,"  />  "],[-1,3005," "],[1,3006," "],[-1,3037,"  "],[1,3039,"  "],[-1,3053,"  "],[1,3055,"  "],[-1,3096,"  "],[1,3098,"  "],[-1,3140,"  "],[1,3142,"  "],[-1,3171,"  "],[1,3173,"  "],[-1,3203,"  "],[1,3205,"  "],[-1,3241,"  "],[1,3243,"  "],[-1,3282,"  "],[1,3284,"  "],[-1,3306,"  />  "],[1,3312,"  />  "],[-1,3327," "],[1,3328," "],[-1,3359,"  "],[1,3361,"  "],[-1,3375,"  "],[1,3377,"  "],[-1,3418,"  "],[1,3420,"  "],[-1,3462,"  "],[1,3464,"  "],[-1,3493,"  "],[1,3495,"  "],[-1,3525,"  "],[1,3527,"  "],[-1,3563,"  "],[1,3565,"  "],[-1,3604,"  "],[1,3606,"  "],[-1,3628,"  />  "],[1,3634,"  />  "],[-1,3655,"  "],[1,3657,"  "],[-1,3691," "],[1,3692," "],[-1,3754," "],[1,3755," "],[-1,3816," "],[1,3817," "],[-1,3830," "],[1,3831," "],[-1,3849,"  "],[1,3851,"  "],[-1,3861," "],[1,3862," "],[-1,3920,"  "],[1,3922,"  "],[-1,3962,"  "],[1,3964,"  "],[-1,3998,"  "],[1,4000,"  "],[-1,4034,"  "],[1,4036,"  "],[-1,4049,"   \n\n       "],[1,4061,"   \n\n       "],[-1,4128,"       "],[1,4135,"       "],[-1,4275,"       "],[1,4282,"       "],[-1,4430,"       "],[1,4437,"       "],[-1,4631,"   "],[1,4634,"   "],[-1,4775," "],[1,4776," "],[-1,4838," "],[1,4839," "],[-1,4901," "],[1,4902," "],[-1,4917,"    "],[1,4921,"    "],[-1,4932," "],[1,4933," "],[-1,4980,"    "],[1,4984,"    "],[-1,4994," "],[1,4995," "],[-1,5043,"    "],[1,5047,"    "],[-1,5057," "],[1,5058," "],[-1,5093,"    "],[1,5097,"    "],[-1,5107," "],[1,5108," "],[-1,5144,"    "],[1,5148,"    "],[-1,5158," "],[1,5159," "],[-1,5201,"    "],[1,5205,"    "],[-1,5215," "],[1,5216," "],[-1,5261,"    "],[1,5265,"    "],[-1,5278,"  \n\n       "],[1,5289,"  \n\n       "],[-1,5344," "],[1,5345," "],[-1,5406," "],[1,5407," "],[-1,5469," "],[1,5470," "],[-1,5539," "],[1,5540," "],[-1,5598,"    "],[1,5602,"    "],[-1,5653,"    "],[1,5657,"    "],[-1,5697,"    "],[1,5701,"    "],[-1,5742,"     "],[1,5747,"     "],[-1,5783,"    "],[1,5787,"    "],[-1,5800,"     "],[1,5805,"     "],[-1,5832,"    "],[1,5836,"    "],[-1,5857,"    />    "],[1,5867,"    />    "],[-1,5882," "],[1,5883," "],[-1,5914,"    "],[1,5918,"    "],[-1,5932,"     "],[1,5937,"     "],[-1,5965,"    "],[1,5969,"    "],[-1,5991,"   />    "],[1,6000,"   />    "],[-1,6015," "],[1,6016," "],[-1,6047,"    "],[1,6051,"    "],[-1,6065,"     "],[1,6070,"     "],[-1,6098,"    "],[1,6102,"    "],[-1,6124,"   />    "],[1,6133,"   />    "],[-1,6155,"  \n\n       "],[1,6166,"  \n\n       "],[-1,6267,"       "],[1,6274,"       "],[-1,6393,"       "],[1,6400,"       "],[-1,6758,"       "],[1,6765,"       "],[-1,6921,"       "],[1,6928,"       "],[-1,6980,"       "],[1,6987,"       "],[-1,7069,"       "],[1,7076,"       "],[-1,7199,"       "],[1,7206,"       ## # 如何有效的减少重复的代码"]],[18,18],[36,36]]],[1520245532404,["gengmei_pxf@gengmei123.local",[[-1,21," #"]],[23,23],[21,21]]],[1520245541739,["gengmei_pxf@gengmei123.local",[[-1,100,"       "]],[107,107],[100,100]]],[1520245551228,["gengmei_pxf@gengmei123.local",[[-1,244,"       "]],[251,251],[244,244]]],[1520245556367,["gengmei_pxf@gengmei123.local",[[-1,19,"## 如何有效的减少重复的代码"]],[19,34],[19,19]]],[1520245556828,["gengmei_pxf@gengmei123.local",[[-1,20,"\n"]],[19,19],[18,18]]],[1520245557116,["gengmei_pxf@gengmei123.local",[[-1,19,"\n"]],[18,18],[17,17]]],[1520245559846,["gengmei_pxf@gengmei123.local",[[-1,227,"那么我们如何做才能去掉"],[1,238,"## 如何有效的减少"],[-1,243,"呢？"]],[227,245],[242,242]]],[1520245566253,["gengmei_pxf@gengmei123.local",[[1,356,"### "]],[356,356],[360,360]]],[1520245571363,["gengmei_pxf@gengmei123.local",[[-1,385,"       "]],[392,392],[385,385]]],[1520245575203,["gengmei_pxf@gengmei123.local",[[-1,510,"       "]],[517,517],[510,510]]],[1520245586897,["gengmei_pxf@gengmei123.local",[[-1,624,"**[html]** [view plain](http://csdnimg.cn/release/phoenix/# \"view plain\") [copy](http://csdnimg.cn/release/phoenix/# \"copy\")"]],[624,748],[624,624]]],[1520245587235,["gengmei_pxf@gengmei123.local",[[-1,625,"\n"]],[624,624],[623,623]]],[1520245647395,[null,[[1,20,"复的代码一直都是可维护性的大敌，重"],[-1,66,"       "],[1,83,"中，很容易产生"],[-1,210,"       那么我们如何做才能去"],[1,237,"重复的代码\n\n**一、使用in"],[1,242,"标签"],[1,339,"### "],[-1,356,"### "],[-1,368,"       "],[1,385,"利器，它的作用"],[-1,493,"       "],[1,510,"用的恰到好处，"],[-1,607,"**[html]** [view u"],[1,625,"\n1.  <LinearLayout"],[-1,7036,"## # 如何有效的减少重复的代码"]],[20,20],[7036,7036]]],[1520245647395,[null,[[-1,20,"复的代码一直都是可维护性的大敌，重"],[1,83,"       "],[-1,93,"中，很容易产生"],[1,227,"       那么我们如何做才能去"],[-1,237,"重复的代码\n\n**一、使用in"],[-1,257,"标签"],[-1,356,"### "],[1,377,"### "],[1,385,"       "],[-1,395,"利器，它的作用"],[1,510,"       "],[-1,520,"用的恰到好处，"],[1,624,"**[html]** [view u"],[-1,624,"\n1.  <LinearLayout"],[1,7053,"## # 如何有效的减少重复的代码"]],[7036,7036],[20,20]]],[1520245587673,["gengmei_pxf@gengmei123.local",[[-1,624,"\n"]],[623,623],[622,622]]],[1520245623474,["gengmei_pxf@gengmei123.local",[[-1,605,"例如：\n\n**test.xml**\n\n1.  <LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"    \n2.  xmlns:tools=\"http://schemas.android.com/tools\"    \n3.  android:layout_width=\"match_parent\"    \n4.  android:layout_height=\"match_parent\"     \n5.  android:orientation=\"vertical\">    \n\n8.  <Button     \n9.  android:layout_width=\"match_parent\"    \n10.  android:layout_height=\"wrap_content\"    \n11.  android:textSize=\"16dp\"    \n12.  android:gravity=\"center\"    \n13.  android:layout_marginTop=\"5dp\"    \n14.  android:layout_marginBottom=\"5dp\"    \n15.  android:text=\"1\"  />    \n\n17.  <View     \n18.  android:layout_width=\"match_parent\"    \n19.  android:layout_height=\"0.5dp\"    \n20.  android:background=\"#BFBFBF\"/>    \n\n23.  <Button     \n24.  android:layout_width=\"match_parent\"    \n25.  android:layout_height=\"wrap_content\"    \n26.  android:textSize=\"16dp\"    \n27.  android:gravity=\"center\"    \n28.  android:layout_marginTop=\"5dp\"    \n29.  android:layout_marginBottom=\"5dp\"    \n30.  android:text=\"2\"  />    \n\n32.  <View     \n33.  android:layout_width=\"match_parent\"    \n34.  android:layout_height=\"0.5dp\"    \n35.  android:background=\"#BFBFBF\"/>    \n\n37.  <Button     \n38.  android:layout_width=\"match_parent\"    \n39.  android:layout_height=\"wrap_content\"    \n40.  android:textSize=\"16dp\"    \n41.  android:gravity=\"center\"    \n42.  android:layout_marginTop=\"5dp\"    \n43.  android:layout_marginBottom=\"5dp\"    \n44.  android:text=\"3\"   />    \n\n46.  </LinearLayout>  \n\n       这段布局是我们正常情况下的写法，从布局中我们可以看出View标签代码是一样的，那么我们就可以把View单独写在一个xml文件里，然后用include标签引用它即可。\n\n简化后的布局代码如下：\n\n**test_1.xml**\n\n**[html]** [view plain](http://csdnimg.cn/release/phoenix/# \"view plain\") [copy](http://csdnimg.cn/release/phoenix/# \"copy\")\n\n1.  <LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"  \n2.  xmlns:tools=\"http://schemas.android.com/tools\"  \n3.  android:layout_width=\"match_parent\"  \n4.  android:layout_height=\"match_parent\"  \n5.  android:orientation=\"vertical\">  \n\n7.  <Button  \n8.  android:layout_width=\"match_parent\"  \n9.  android:layout_height=\"wrap_content\"  \n10.  android:textSize=\"16dp\"  \n11.  android:gravity=\"center\"  \n12.  android:layout_marginTop=\"5dp\"  \n13.  android:layout_marginBottom=\"5dp\"  \n14.  android:text=\"1\"  />  \n\n16.  <include layout=\"@layout/divider_view\"/>  \n\n18.  <Button  \n19.  android:layout_width=\"match_parent\"  \n20.  android:layout_height=\"wrap_content\"  \n21.  android:textSize=\"16dp\"  \n22.  android:gravity=\"center\"  \n23.  android:layout_marginTop=\"5dp\"  \n24.  android:layout_marginBottom=\"5dp\"  \n25.  android:text=\"2\"  />  \n\n27.  <include layout=\"@layout/divider_view\"/>  \n\n29.  <Button  \n30.  android:layout_width=\"match_parent\"  \n31.  android:layout_height=\"wrap_content\"  \n32.  android:textSize=\"16dp\"  \n33.  android:gravity=\"center\"  \n34.  android:layout_marginTop=\"5dp\"  \n35.  android:layout_marginBottom=\"5dp\"  \n36.  android:text=\"3\"  />  \n37.  </LinearLayout>  \n\n**divider_view.xml**\n\n**[html]** [view plain](http://csdnimg.cn/release/phoenix/# \"view plain\") [copy](http://csdnimg.cn/release/phoenix/# \"copy\")\n\n1.  <?xml version=\"1.0\" encoding=\"utf-8\"?>  \n2.  <View xmlns:android=\"http://schemas.android.com/apk/res/android\"  \n3.  android:layout_width=\"match_parent\"  \n4.  android:layout_height=\"0.5dp\"  \n5.  android:background=\"#BFBFBF\">  \n\n7.  </View>   \n\n       怎么样，是不是比原来的布局代码简洁直观多了，而且实现出来的效果也一样。当然这是单个View重复，那么多个View组重复也是一样的。\n\n      "]],[605,3980],[605,605]]],[1520245624898,["gengmei_pxf@gengmei123.local",[[-1,604,"\n"]],[605,605],[604,604]]],[1520245626090,["gengmei_pxf@gengmei123.local",[[1,604,"\n"]],[604,604],[605,605]]],[1520245628250,["gengmei_pxf@gengmei123.local",[[-1,605," "]],[606,606],[605,605]]],[1520245641419,["gengmei_pxf@gengmei123.local",[[1,726,"### "]],[726,726],[730,730]]],[1520245646145,["gengmei_pxf@gengmei123.local",[[-1,749,"       "]],[756,756],[749,749]]],[1520245707392,[null,[[1,20,"复的代码一直都是可维护性的大敌，重"],[-1,66,"       "],[1,83,"中，很容易产生"],[-1,210,"       那么我们如何做才能去"],[1,237,"重复的代码\n\n**一、使用in"],[1,242,"标签"],[1,339,"### "],[-1,356,"### "],[-1,368,"       "],[1,385,"利器，它的作用"],[-1,493,"       "],[1,510,"用的恰到好处，"],[-1,588,"例如：\n\n**test.xml*\n"],[1,605,"使用include标签还有一个好处"],[1,709,"### "],[-1,726,"### "],[-1,732,"       "],[1,749,"中，会有很多控"],[-1,3656,"## # 如何有效的减少重复的代码"]],[20,20],[3656,3656]]],[1520245707392,[null,[[-1,20,"复的代码一直都是可维护性的大敌，重"],[1,83,"       "],[-1,93,"中，很容易产生"],[1,227,"       那么我们如何做才能去"],[-1,237,"重复的代码\n\n**一、使用in"],[-1,257,"标签"],[-1,356,"### "],[1,377,"### "],[1,385,"       "],[-1,395,"利器，它的作用"],[1,510,"       "],[-1,520,"用的恰到好处，"],[1,605,"例如：\n\n**test.xml*\n"],[-1,605,"使用include标签还有一个好处"],[-1,726,"### "],[1,747,"### "],[1,749,"       "],[-1,759,"中，会有很多控"],[1,3673,"## # 如何有效的减少重复的代码"]],[3656,3656],[20,20]]],[1520245678097,["gengmei_pxf@gengmei123.local",[[-1,897,"       就比如test_1.xml布局文件中有三个Button控件，只有text内容不同，那么我们如何把Button的共同点提取到style中呢？很简单，在styles.xml下 新增一对<style>标签，为该style命名，如命名为DemoBtn，然后在<style>标签内 使用<item>标签来存放控件的属性，例如 android:layout_width=\"match_parent\"     ，用<item>来表示就是 <item name=\"android:layout_width\">match_parent</item>，name是控件的属性名，标签之间则是属性值\n\n按照这样的方法，把所有共同属性都添加到DemoBtn这一style中即可。\n\n**[html]** [view plain](http://csdnimg.cn/release/phoenix/# \"view plain\") [copy](http://csdnimg.cn/release/phoenix/# \"copy\")\n\n1.  <style name=\"DemoBtn\">    \n\n3.  <item name=\"android:layout_width\">match_parent</item>    \n4.  <item name=\"android:layout_height\">wrap_content</item>    \n5.  <item name=\"android:textSize\">16dp</item>    \n6.  <item name=\"android:gravity\">center</item>    \n7.  <item name=\"android:layout_marginTop\">5dp</item>    \n8.  <item name=\"android:layout_marginBottom\">5dp</item>    \n9.  </style>  \n\n       最后回到布局中，把三个Button的共同属性全都删除掉，换为 style =\"@style/DemoBtn\"   ，就能达到原来的效果，1行代码代替6行代码，代码现在更加美观了。\n\n**test_2.xml**\n\n**[html]** [view plain](http://csdnimg.cn/release/phoenix/# \"view plain\") [copy](http://csdnimg.cn/release/phoenix/# \"copy\")\n\n1.  <LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"    \n2.  xmlns:tools=\"http://schemas.android.com/tools\"    \n3.  android:layout_width=\"match_parent\"    \n4.  android:layout_height=\"match_parent\"     \n5.  android:orientation=\"vertical\">    \n\n7.  <Button     \n8.  style=\"@style/DemoBtn\"    \n9.  android:text=\"1\"    />    \n\n11.  <include layout=\"@layout/divider_view\"/>    \n\n13.  <Button     \n14.  style=\"@style/DemoBtn\"    \n15.  android:text=\"2\"   />    \n\n17.  <include layout=\"@layout/divider_view\"/>    \n\n19.  <Button     \n20.  style=\"@style/DemoBtn\"    \n21.  android:text=\"3\"   />    \n\n23.  </LinearLayout>  \n\n       经过include标签引用和style样式提取，在看我们的布局文件，是不是感觉很清爽了。而且需要修改样式的话，只需要在style中修改就可以了。"]],[897,904],[897,897]]],[1520245678793,["gengmei_pxf@gengmei123.local",[[-1,898,"\n"]],[897,897],[896,896]]],[1520245679625,["gengmei_pxf@gengmei123.local",[[-1,897,"\n"]],[896,896],[895,895]]],[1520245682939,["gengmei_pxf@gengmei123.local",[[1,897,"### "]],[897,897],[901,901]]],[1520245687472,["gengmei_pxf@gengmei123.local",[[-1,928,"       "]],[928,935],[928,928]]],[1520245690890,["gengmei_pxf@gengmei123.local",[[-1,1047,"       "]],[1048,1054],[1047,1047]]],[1520245700299,["gengmei_pxf@gengmei123.local",[[1,1390,"### "]],[1390,1390],[1394,1394]]],[1520245703464,["gengmei_pxf@gengmei123.local",[[-1,1409,"       "]],[1409,1416],[1409,1409]]],[1520245707225,["gengmei_pxf@gengmei123.local",[[1,1549,"### "]],[1549,1549],[1553,1553]]],[1520245767396,[null,[[1,20,"复的代码一直都是可维护性的大敌，重"],[-1,66,"       "],[1,83,"中，很容易产生"],[-1,210,"       那么我们如何做才能去"],[1,237,"重复的代码\n\n**一、使用in"],[1,242,"标签"],[1,339,"### "],[-1,356,"### "],[-1,368,"       "],[1,385,"利器，它的作用"],[-1,493,"       "],[1,510,"用的恰到好处，"],[-1,588,"例如：\n\n**test.xml*\n"],[1,605,"使用include标签还有一个好处"],[1,709,"### "],[-1,726,"### "],[-1,732,"       "],[1,749,"中，会有很多控"],[-1,880,"       就比如test_1."],[1,901,"**三、使用ViewStub减少整"],[-1,911,"       "],[1,928,"复用布局组合，"],[-1,1030,"       "],[1,1047,"个轻量级别的，"],[1,1373,"### "],[-1,1388,"  ###      "],[1,1409,"ndroid的"],[1,1532,"### "],[-1,1548," ###"],[-1,1837,"## # 如何有效的减少重复的代码"],[1,1854,""]],[20,20],[1854,1854]]],[1520245767396,[null,[[-1,20,"复的代码一直都是可维护性的大敌，重"],[1,83,"       "],[-1,93,"中，很容易产生"],[1,227,"       那么我们如何做才能去"],[-1,237,"重复的代码\n\n**一、使用in"],[-1,257,"标签"],[-1,356,"### "],[1,377,"### "],[1,385,"       "],[-1,395,"利器，它的作用"],[1,510,"       "],[-1,520,"用的恰到好处，"],[1,605,"例如：\n\n**test.xml*\n"],[-1,605,"使用include标签还有一个好处"],[-1,726,"### "],[1,747,"### "],[1,749,"       "],[-1,759,"中，会有很多控"],[1,897,"       就比如test_1."],[-1,901,"**三、使用ViewStub减少整"],[1,928,"       "],[-1,938,"复用布局组合，"],[1,1047,"       "],[-1,1057,"个轻量级别的，"],[-1,1390,"### "],[1,1409,"  ###      "],[-1,1419,"ndroid的"],[-1,1549,"### "],[1,1569," ###"],[1,1854,"## # 如何有效的减少重复的代码"],[-1,1854,""]],[1854,1854],[20,20]]],[1520245710944,["gengmei_pxf@gengmei123.local",[[-1,1569,"       "]],[1569,1576],[1569,1569]]],[1520245714985,["gengmei_pxf@gengmei123.local",[[1,1611,"### "]],[1611,1611],[1615,1615]]],[1520245718560,["gengmei_pxf@gengmei123.local",[[-1,1625,"       "]],[1625,1632],[1625,1625]]],[1520245722048,["gengmei_pxf@gengmei123.local",[[-1,1707,"       "]],[1707,1714],[1707,1707]]],[1520245726263,["gengmei_pxf@gengmei123.local",[[-1,1830,"       "]],[1831,1837],[1830,1830]]],[1520245761328,["gengmei_pxf@gengmei123.local",[[-1,1856,"孤认为，"]],[1856,1860],[1856,1856]]],[1520245887407,[null,[[1,20,"复的代码一直都是可维护性的大敌，重"],[-1,66,"       "],[1,83,"中，很容易产生"],[-1,210,"       那么我们如何做才能去"],[1,237,"重复的代码\n\n**一、使用in"],[1,242,"标签"],[1,339,"### "],[-1,356,"### "],[-1,368,"       "],[1,385,"利器，它的作用"],[-1,493,"       "],[1,510,"用的恰到好处，"],[-1,588,"例如：\n\n**test.xml*\n"],[1,605,"使用include标签还有一个好处"],[1,709,"### "],[-1,726,"### "],[-1,732,"       "],[1,749,"中，会有很多控"],[-1,880,"       就比如test_1."],[1,901,"**三、使用ViewStub减少整"],[-1,911,"       "],[1,928,"复用布局组合，"],[-1,1030,"       "],[1,1047,"个轻量级别的，"],[1,1373,"### "],[-1,1388,"  ###      "],[1,1409,"ndroid的"],[1,1532,"### "],[-1,1548," ###       "],[1,1569,"码就是用通用的"],[1,1594,"### "],[-1,1604,"       ### "],[1,1625,"键都在于要分析"],[-1,1690,"       "],[1,1707,"定义是达到三次"],[-1,1813,"       ## # 如何有效的"]],[20,20],[1813,1813]]],[1520245887407,[null,[[-1,20,"复的代码一直都是可维护性的大敌，重"],[1,83,"       "],[-1,93,"中，很容易产生"],[1,227,"       那么我们如何做才能去"],[-1,237,"重复的代码\n\n**一、使用in"],[-1,257,"标签"],[-1,356,"### "],[1,377,"### "],[1,385,"       "],[-1,395,"利器，它的作用"],[1,510,"       "],[-1,520,"用的恰到好处，"],[1,605,"例如：\n\n**test.xml*\n"],[-1,605,"使用include标签还有一个好处"],[-1,726,"### "],[1,747,"### "],[1,749,"       "],[-1,759,"中，会有很多控"],[1,897,"       就比如test_1."],[-1,901,"**三、使用ViewStub减少整"],[1,928,"       "],[-1,938,"复用布局组合，"],[1,1047,"       "],[-1,1057,"个轻量级别的，"],[-1,1390,"### "],[1,1409,"  ###      "],[-1,1419,"ndroid的"],[-1,1549,"### "],[1,1569," ###       "],[-1,1579,"码就是用通用的"],[-1,1611,"### "],[1,1625,"       ### "],[-1,1635,"键都在于要分析"],[1,1707,"       "],[-1,1717,"定义是达到三次"],[1,1830,"       ## # 如何有效的"]],[1813,1813],[20,20]]],[1520245836116,["gengmei_pxf@gengmei123.local",[[1,244,"\n"]],[242,242],[243,243]]],[1520245836571,["gengmei_pxf@gengmei123.local",[[1,245,"\n"]],[243,243],[244,244]]],[1520245840772,["gengmei_pxf@gengmei123.local",[[-1,245,"\n"]],[244,244],[243,243]]],[1520245841148,["gengmei_pxf@gengmei123.local",[[-1,244,"\n"]],[243,243],[242,242]]],[1520245845943,["gengmei_pxf@gengmei123.local",[[1,1609,"## 为你的项目定义一个基Activity或Fragment\n\n无论你的项目大或小，定义一个基Activity或Fragment总是有好处的。随着项目的发展，会有大量的公共代码可以抽出来放到基类里去。或者在基类里面做一些项目特色的事情。再或者添加一些统计，崩溃反馈等等。在一个基类里面改动总比把每个Activity或Fragment里面都改一遍要好的多。"]],[1609,1609],[1786,1786]]],[1520245850675,["gengmei_pxf@gengmei123.local",[[-1,1609,"##"]],[1611,1611],[1609,1609]]],[1520245851307,["gengmei_pxf@gengmei123.local",[[1,1609,"\n"]],[1609,1609],[1610,1610]]],[1520245852282,["gengmei_pxf@gengmei123.local",[[1,1610,"\n"]],[1610,1610],[1611,1611]]],[1520245854478,["gengmei_pxf@gengmei123.local",[[-1,1611," "]],[1612,1612],[1611,1611]]],[1520245856076,["gengmei_pxf@gengmei123.local",[[-1,1639,"\n"]],[1639,1639],[1638,1638]]],[1520245870868,["gengmei_pxf@gengmei123.local",[[1,1611," #### "]],[1611,1611],[1617,1617]]],[1520245873258,["gengmei_pxf@gengmei123.local",[[1,1645,"\n"]],[1644,1644],[1645,1645]]],[1520245880426,["gengmei_pxf@gengmei123.local",[[-1,1611," #### "]],[1617,1617],[1611,1611]]],[1520245883716,["gengmei_pxf@gengmei123.local",[[1,1611,"例如 "]],[1611,1611],[1614,1614]]],[1520245886836,["gengmei_pxf@gengmei123.local",[[1,1611,"* "]],[1611,1611],[1613,1613]]],[1520245902550,[null,[[1,20,"复的代码一直都是可维护性的大敌，重"],[-1,66,"       "],[1,83,"中，很容易产生"],[-1,210,"       那么我们如何做才能去"],[1,237,"重复的代码\n\n**一、使用in"],[1,242,"标签"],[1,339,"### "],[-1,356,"### "],[-1,368,"       "],[1,385,"利器，它的作用"],[-1,493,"       "],[1,510,"用的恰到好处，"],[-1,588,"例如：\n\n**test.xml*\n"],[1,605,"使用include标签还有一个好处"],[1,709,"### "],[-1,726,"### "],[-1,732,"       "],[1,749,"中，会有很多控"],[-1,880,"       就比如test_1."],[1,901,"**三、使用ViewStub减少整"],[-1,911,"       "],[1,928,"复用布局组合，"],[-1,1030,"       "],[1,1047,"个轻量级别的，"],[1,1373,"### "],[-1,1388,"  ###      "],[1,1409,"ndroid的"],[1,1532,"### "],[-1,1548," ###       "],[1,1569,"码就是用通用的"],[-1,1592,"\n\n**六、总结**\n\n     "],[-1,1790,"  "],[1,1792,"\n\n"],[1,1796,"**六、总结**\n\n"],[1,1806,"键都在于要分析"],[-1,1871,"       "],[1,1888,"定义是达到三次"],[-1,1994,"       ## # 如何有效的"]],[20,20],[1994,1994]]],[1520245902550,[null,[[-1,20,"复的代码一直都是可维护性的大敌，重"],[1,83,"       "],[-1,93,"中，很容易产生"],[1,227,"       那么我们如何做才能去"],[-1,237,"重复的代码\n\n**一、使用in"],[-1,257,"标签"],[-1,356,"### "],[1,377,"### "],[1,385,"       "],[-1,395,"利器，它的作用"],[1,510,"       "],[-1,520,"用的恰到好处，"],[1,605,"例如：\n\n**test.xml*\n"],[-1,605,"使用include标签还有一个好处"],[-1,726,"### "],[1,747,"### "],[1,749,"       "],[-1,759,"中，会有很多控"],[1,897,"       就比如test_1."],[-1,901,"**三、使用ViewStub减少整"],[1,928,"       "],[-1,938,"复用布局组合，"],[1,1047,"       "],[-1,1057,"个轻量级别的，"],[-1,1390,"### "],[1,1409,"  ###      "],[-1,1419,"ndroid的"],[-1,1549,"### "],[1,1569," ###       "],[-1,1579,"码就是用通用的"],[1,1609,"\n\n**六、总结**\n\n     "],[1,1790,"  "],[-1,1790,"\n\n"],[-1,1796,"**六、总结**\n\n"],[-1,1816,"键都在于要分析"],[1,1888,"       "],[-1,1898,"定义是达到三次"],[1,2011,"       ## # 如何有效的"]],[1994,1994],[20,20]]],[1520245894276,["gengmei_pxf@gengmei123.local",[[1,1616,"**"]],[1616,1616],[1618,1618]]],[1520245897188,["gengmei_pxf@gengmei123.local",[[1,1645,"**"]],[1645,1645],[1647,1647]]],[1520245916132,[null,[[1,20,"复的代码一直都是可维护性的大敌，重"],[-1,66,"       "],[1,83,"中，很容易产生"],[-1,210,"       那么我们如何做才能去"],[1,237,"重复的代码\n\n**一、使用in"],[1,242,"标签"],[1,339,"### "],[-1,356,"### "],[-1,368,"       "],[1,385,"利器，它的作用"],[-1,493,"       "],[1,510,"用的恰到好处，"],[-1,588,"例如：\n\n**test.xml*\n"],[1,605,"使用include标签还有一个好处"],[1,709,"### "],[-1,726,"### "],[-1,732,"       "],[1,749,"中，会有很多控"],[-1,880,"       就比如test_1."],[1,901,"**三、使用ViewStub减少整"],[-1,911,"       "],[1,928,"复用布局组合，"],[-1,1030,"       "],[1,1047,"个轻量级别的，"],[1,1373,"### "],[-1,1388,"  ###      "],[1,1409,"ndroid的"],[1,1532,"### "],[-1,1548," ###       "],[1,1569,"码就是用通用的"],[-1,1592,"\n\n**六、总结**\n\n     "],[-1,1794,"  "],[1,1796,"\n\n"],[1,1800,"**六、总结**\n\n"],[1,1810,"键都在于要分析"],[-1,1875,"       "],[1,1892,"定义是达到三次"],[-1,1998,"       ## # 如何有效的"]],[20,20],[1998,1998]]],[1520245916132,[null,[[-1,20,"复的代码一直都是可维护性的大敌，重"],[1,83,"       "],[-1,93,"中，很容易产生"],[1,227,"       那么我们如何做才能去"],[-1,237,"重复的代码\n\n**一、使用in"],[-1,257,"标签"],[-1,356,"### "],[1,377,"### "],[1,385,"       "],[-1,395,"利器，它的作用"],[1,510,"       "],[-1,520,"用的恰到好处，"],[1,605,"例如：\n\n**test.xml*\n"],[-1,605,"使用include标签还有一个好处"],[-1,726,"### "],[1,747,"### "],[1,749,"       "],[-1,759,"中，会有很多控"],[1,897,"       就比如test_1."],[-1,901,"**三、使用ViewStub减少整"],[1,928,"       "],[-1,938,"复用布局组合，"],[1,1047,"       "],[-1,1057,"个轻量级别的，"],[-1,1390,"### "],[1,1409,"  ###      "],[-1,1419,"ndroid的"],[-1,1549,"### "],[1,1569," ###       "],[-1,1579,"码就是用通用的"],[1,1609,"\n\n**六、总结**\n\n     "],[1,1794,"  "],[-1,1794,"\n\n"],[-1,1800,"**六、总结**\n\n"],[-1,1820,"键都在于要分析"],[1,1892,"       "],[-1,1902,"定义是达到三次"],[1,2015,"       ## # 如何有效的"]],[1998,1998],[20,20]]],[1520245911372,["gengmei_pxf@gengmei123.local",[[1,1627,"抽象的"]],[1627,1627],[1630,1630]]]]]]}